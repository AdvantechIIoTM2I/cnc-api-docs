# 3.2.3 MAvailTrend

## Information

* Return Devicesâ€™ Availability Trend within query time range
* For every status change within query time range, compute an availability value on that timestamp
* Support one or multiple devices


## Format

* ### Request

    ```
    fns.MAvailTrend("path",'device_id', "$from", "$to")
    ```

    | Variable | Data Type | Description | Example |
    | :---: | :---: | :---: | :---: |
    | path | String | WISE-PaaS APM's Group tree path<br>where the device belongs to | /Advantech/Taipei |
    | device_id | String | String of device ids \(one or multiple devices\) | {Dev-01} or {Dev-01,Dev-02} |
    | $from | ISODate String | Grafana Start time variable or ISO Date String | $from or "2018-10-01T00:00:00:000Z" |
    | $to | ISODate String | Grafana End time variable or ISO Date String | $to or "2018-10-10T00:00:00:000Z" |

    - **Note:**
        - 'path' can be empty string if you want to query all devices with the same name of "device ID"
        - 'device_id' can be empty string if you want to query all devices under the specified 'path'
  

* ### Response Tags

    | Tag Name | Data Type | Description | Example |
    | :---: | :---: | :---: | :---: |
    | DevID | String | Device ID | MC-29 |
    | Ts | Datetime | Timestamp of the data | 1539679347445 |    
    | Availability | float | Availability of the given Timestamp | 90.1 |
  

* ### Example  
    1. Query Availability Trend of multiple device   
        - Query   
        ``` select DevID as metric, Availability, Ts from fns.MAvailTrend("$Group/$Factory","{MC-41, FM-01,FM-02}", "$from", "$to") ```
        - Return Data Format   
            * timeseries
        - Query Time Type   
            * utc
        - Panel Type   
            * Graph
        - Panel Screenshot      
            ![](/images/3.2.3-MAvailTrend.jpg)
        - Return Value Example    
            ```
            [
                {
                    "datapoints": [
                        [
                            0, 
                            1539705600000
                        ], 
                        [
                            0.0, 
                            1539733186360
                        ], 
                        [
                            0.0, 
                            1539734663275
                        ], 
                        [
                            0.0, 
                            1539734713330
                        ], 
                        [
                            0.36, 
                            1539734813437
                        ], 
                        [
                            0.36, 
                            1539734954396
                        ], 
                        [
                            0.68, 
                            1539735044499
                        ], 
                        [
                            0.68, 
                            1539735094556
                        ], 
                        [
                            0.68, 
                            1539735134599
                        ], 
                        [
                            1.03, 
                            1539735234711
                        ], 
                        [
                            1.03, 
                            1539735374864
                        ], 
                        [
                            2.1, 
                            1539735685207
                        ], 
                        [
                            2.1, 
                            1539735735259
                        ], 
                        [
                            5.24, 
                            1539736685884
                        ], 
                        [
                            5.23, 
                            1539736735940
                        ], 
                        [
                            5.36, 
                            1539736775361
                        ], 
                        [
                            5.35, 
                            1539736825416
                        ], 
                        [
                            8.43, 
                            1539737826467
                        ], 
                        [
                            8.42, 
                            1539737866512
                        ], 
                        [
                            10.77, 
                            1539738677354
                        ], 
                        [
                            10.75, 
                            1539738727410
                        ], 
                        [
                            13.33, 
                            1539739667873
                        ], 
                        [
                            13.31, 
                            1539739707916
                        ], 
                        [
                            13.79, 
                            1539739888108
                        ], 
                        [
                            12.89, 
                            1539742179786
                        ], 
                        [
                            13.21, 
                            1539742311298
                        ], 
                        [
                            13.0, 
                            1539742881927
                        ], 
                        [
                            12.99, 
                            1539742921970
                        ], 
                        [
                            12.97, 
                            1539742972023
                        ], 
                        [
                            24.73, 
                            1539748581471
                        ], 
                        [
                            24.73, 
                            1539748631525
                        ], 
                        [
                            24.71, 
                            1539748671567
                        ], 
                        [
                            24.8, 
                            1539748724780
                        ], 
                        [
                            24.73, 
                            1539748854923
                        ], 
                        [
                            24.7, 
                            1539748904976
                        ], 
                        [
                            24.79, 
                            1539748955028
                        ], 
                        [
                            24.76, 
                            1539748995063
                        ], 
                        [
                            44.59, 
                            1539763977281
                        ], 
                        [
                            44.56, 
                            1539764017332
                        ], 
                        [
                            51.0, 
                            1539771501110
                        ]
                    ], 
                    "target": "FM-01"
                }, 
                {
                    "datapoints": [
                        [
                            0, 
                            1539705600000
                        ], 
                        [
                            100.0, 
                            1539733246422
                        ], 
                        [
                            100.0, 
                            1539735965101
                        ], 
                        [
                            99.86, 
                            1539736005143
                        ], 
                        [
                            99.86, 
                            1539736055201
                        ], 
                        [
                            99.86, 
                            1539736185344
                        ], 
                        [
                            99.04, 
                            1539736415596
                        ], 
                        [
                            99.16, 
                            1539740388657
                        ], 
                        [
                            99.0, 
                            1539740438486
                        ], 
                        [
                            97.12, 
                            1539741059166
                        ], 
                        [
                            97.17, 
                            1539741599147
                        ], 
                        [
                            97.05, 
                            1539741639183
                        ], 
                        [
                            97.07, 
                            1539741819376
                        ], 
                        [
                            96.95, 
                            1539741859422
                        ], 
                        [
                            97.25, 
                            1539745472478
                        ], 
                        [
                            97.14, 
                            1539745512524
                        ], 
                        [
                            97.19, 
                            1539746171961
                        ], 
                        [
                            96.4, 
                            1539746482297
                        ], 
                        [
                            96.41, 
                            1539746522342
                        ], 
                        [
                            95.95, 
                            1539746702540
                        ], 
                        [
                            96.58, 
                            1539753771622
                        ], 
                        [
                            92.54, 
                            1539755755535
                        ], 
                        [
                            94.4, 
                            1539771501110
                        ]
                    ], 
                    "target": "FM-02"
                }, 
                {
                    "datapoints": [
                        [
                            0, 
                            1539705600000
                        ], 
                        [
                            0, 
                            1539723460219
                        ], 
                        [
                            0.0, 
                            1539723839459
                        ], 
                        [
                            37.77, 
                            1539724069651
                        ], 
                        [
                            36.57, 
                            1539724089673
                        ], 
                        [
                            38.52, 
                            1539724109687
                        ], 
                        [
                            37.94, 
                            1539724119697
                        ], 
                        [
                            94.82, 
                            1539731358456
                        ], 
                        [
                            93.75, 
                            1539731448501
                        ], 
                        [
                            93.8, 
                            1539731508563
                        ], 
                        [
                            92.19, 
                            1539731648653
                        ], 
                        [
                            92.21, 
                            1539731668675
                        ], 
                        [
                            89.8, 
                            1539731888826
                        ], 
                        [
                            94.13, 
                            1539738096752
                        ], 
                        [
                            93.68, 
                            1539738166828
                        ], 
                        [
                            93.68, 
                            1539738176838
                        ], 
                        [
                            93.24, 
                            1539738246918
                        ], 
                        [
                            93.25, 
                            1539738266940
                        ], 
                        [
                            92.75, 
                            1539738347032
                        ], 
                        [
                            92.77, 
                            1539738397083
                        ], 
                        [
                            92.34, 
                            1539738467156
                        ], 
                        [
                            92.35, 
                            1539738487177
                        ], 
                        [
                            91.86, 
                            1539738567263
                        ], 
                        [
                            93.01, 
                            1539741059161
                        ], 
                        [
                            92.85, 
                            1539741089195
                        ], 
                        [
                            92.86, 
                            1539741109216
                        ], 
                        [
                            92.76, 
                            1539741129237
                        ], 
                        [
                            92.76, 
                            1539741139251
                        ], 
                        [
                            92.71, 
                            1539741149262
                        ], 
                        [
                            92.72, 
                            1539741169285
                        ], 
                        [
                            90.07, 
                            1539741689233
                        ], 
                        [
                            90.08, 
                            1539741709253
                        ], 
                        [
                            89.74, 
                            1539741779329
                        ], 
                        [
                            89.77, 
                            1539741839395
                        ], 
                        [
                            89.43, 
                            1539741909473
                        ], 
                        [
                            90.69, 
                            1539744401807
                        ], 
                        [
                            90.6, 
                            1539744421832
                        ], 
                        [
                            90.61, 
                            1539744431842
                        ], 
                        [
                            90.52, 
                            1539744451864
                        ], 
                        [
                            90.53, 
                            1539744481898
                        ], 
                        [
                            89.34, 
                            1539744762201
                        ], 
                        [
                            89.81, 
                            1539745732770
                        ], 
                        [
                            89.68, 
                            1539745762805
                        ], 
                        [
                            90.13, 
                            1539746762599
                        ], 
                        [
                            90.09, 
                            1539746772610
                        ], 
                        [
                            90.74, 
                            1539748401281
                        ], 
                        [
                            90.7, 
                            1539748411291
                        ], 
                        [
                            90.79, 
                            1539748661552
                        ], 
                        [
                            90.53, 
                            1539748734787
                        ], 
                        [
                            90.55, 
                            1539748784841
                        ], 
                        [
                            90.33, 
                            1539748844907
                        ], 
                        [
                            90.33, 
                            1539771501110
                        ]
                    ], 
                    "target": "MC-41"
                }
            ]
            ```

 